# Production overrides for VPS deployment.
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
services:
  bot:
    # Use pre-built image from Docker Hub instead of building
    image: ${IMAGE_NAME:-konstantinbalakin/telegram-voice2text-bot:latest}
    environment:
      # Application version for logging
      - APP_VERSION=${APP_VERSION:-unknown}
      # Optional: Remote syslog configuration
      - SYSLOG_ENABLED=${SYSLOG_ENABLED:-false}
      - SYSLOG_HOST=${SYSLOG_HOST:-}
      - SYSLOG_PORT=${SYSLOG_PORT:-514}
    # DNS configuration for model downloads
    dns:
      - 198.18.18.18  # VPS host DNS
      - 8.8.8.8       # Google DNS (fallback)
      - 8.8.4.4       # Google DNS (fallback)
    # Resource limits for production (1GB VPS)
    # Note: Limits tuned for 1 vCPU / 1GB RAM VPS
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '0.95'
    #       memory: 900M
    #     reservations:
    #       cpus: '0.1'
    #       memory: 150M
