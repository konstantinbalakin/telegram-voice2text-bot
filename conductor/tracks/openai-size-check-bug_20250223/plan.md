# Implementation Plan: OpenAI File Size Check Blocks Chunking

**Track ID:** openai-size-check-bug_20250223
**Spec:** [spec.md](./spec.md)
**Created:** 2026-02-23
**Status:** [ ] Not Started

## Overview

Remove premature file size check from OpenAIProvider.transcribe() so files > 25MB can be chunked and transcribed via OpenAI API. The check is redundant because chunks are created at 420 seconds each, which should always be < 25MB for typical audio formats.

## Phase 1: Analysis & Testing

Understand current behavior and create failing test.

### Tasks

- [x] Task 1.1: Analyze _transcribe_single_file() - confirm chunks will be < 25MB
- [x] Task 1.2: Create test for 30MB file with OPENAI_CHUNKING=true
- [x] Task 1.3: Verify test fails with current code (ValueError at size check)

### Verification

- [x] Test reproduces the bug: ValueError before chunking

## Phase 2: Fix Implementation

Remove the blocking file size check and ensure chunks are safe.

### Tasks

- [~] Task 2.1: Remove file size check from transcribe() (lines 127-132)
- [ ] Task 2.2: Verify _transcribe_single_file() has no size limit
- [ ] Task 2.3: Add warning log if chunk exceeds 25MB (graceful degradation)
- [ ] Task 2.4: Run test to confirm fix works

### Verification

- [ ] 30MB test passes without ValueError
- [ ] Chunks transcribed successfully via OpenAI API
- [ ] No regression for small files (< 25MB)

## Phase 3: Regression Testing

Ensure no side effects from the change.

### Tasks

- [ ] Task 3.1: Run existing OpenAI provider tests
- [ ] Task 3.2: Test with 10MB file (no chunking needed)
- [ ] Task 3.3: Test with 30MB file (chunking triggers)
- [ ] Task 3.4: Test with 100MB file (multiple chunks)

### Verification

- [ ] All tests pass
- [ ] No unexpected behavior in production

## Final Verification

- [ ] All acceptance criteria met
- [ ] Tests passing (pytest tests/unit/test_openai_provider.py)
- [ ] Lint/typecheck pass (ruff, mypy)
- [ ] Ready for review

---

_Generated by Conductor. Tasks will be marked [~] in progress and [x] complete._